@model RealEstateApp.Application.ViewModels.Chats.ChatViewModel

<div class="container my-5">
    <h2 class="mb-4">Chat con @Model.ClientName</h2>
    <div class="chat-box border p-3 mb-4" style="height: 400px; overflow-y: auto;">
        @foreach (var message in Model.Messages)
        {
            <div class="mb-2 @(message.IsAgent ? "text-end" : "text-start")">
                <p class="mb-1 @(message.IsAgent ? "bg-primary text-white" : "bg-light text-dark") rounded p-2">
                    @message.Content
                </p>
                <small class="text-muted">@message.Timestamp.ToString("g")</small>
            </div>
        }
    </div>

    <form asp-action="Message" method="post" class="d-flex">
        <input type="hidden" name="chatId" value="@Model.ChatId" />
        <input type="text" name="content" class="form-control me-2" placeholder="Escribe tu mensaje..." required />
        <button type="submit" class="btn btn-primary">Enviar</button>
    </form>

    <div class="mt-4">
        <a asp-action="Chats" class="btn btn-secondary">Volver a la lista de chats</a>
    </div>
</div>